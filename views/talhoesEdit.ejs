<%- include('partials/header.ejs') %>
<%- include('partials/navbar-user.ejs') %>
<main class="main-content home-dashboard">
    <%- include ('partials/navbar-lateral.ejs') %>
    <section class="dashboard-container">
        <header class="dashboard-header">
            <div style="display: flex; align-items: center; gap: 16px;">
                <a href="/cadastroPes/<%= talhao.id_talhao %>" style="text-decoration: none; display: inline-flex; align-items: center; background: #65B741; color: white; padding: 12px 20px; border-radius: 12px; font-weight: 600; font-size: 16px; gap: 8px;">
                    <img src="/imgs/back.svg" alt="Voltar" style="width: 24px; height: 24px; filter: brightness(0) invert(1);">
                    Voltar
                </a>
                <h1 style="margin: 0; font-size: 28px; font-weight: 700; color: #351102;">Editar Talhão</h1>
            </div>
        </header>

        <section class="analysis-section">
            <div class="analysis-card" style="margin-bottom: 24px;">
                <div class="card-body">
                    <form action="/talhoes/update" method="POST" style="background: #fff; border-radius: 12px; padding: 20px;">
                        <input type="hidden" name="id_propriedade" value="<%= talhao.id_propriedade%>">
                        <input type="hidden" name="id_talhao" value="<%= talhao.id_talhao%>">
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #351102;">Propriedade</label>
                            <div style="padding: 10px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9;">
                                <%= talhao.propriedade.nome %>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #351102;">Alqueire</label>
                            <div style="padding: 10px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9;">
                                <%= talhao.alqueire ? talhao.alqueire.nome : 'Sem alqueire' %>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label for="nome" style="display: block; margin-bottom: 8px; font-weight: 600; color: #351102;">Nome do Talhão</label>
                            <input type="text" id="nome" name="nome" value="<%= talhao.nome %>" required 
                                style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label for="especie_fruta" style="display: block; margin-bottom: 8px; font-weight: 600; color: #351102;">Espécie Plantada</label>
                            <input type="text" id="especie_fruta" name="especie_fruta" value="<%= talhao.especie_fruta %>" required 
                                style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
                        </div>
                        
                        <div style="text-align: center; margin-top: 20px;">
                            <button type="submit" style="background: #65B741; color: #fff; font-weight: 600; border-radius: 8px; padding: 10px 40px; border: none; cursor: pointer; font-size: 16px;" 
                                    onclick="return confirm('Deseja realmente alterar o talhão <%= talhao.nome %>')">
                                Salvar Alterações
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </section>
    </section>
</main>
<%- include('partials/footer.ejs') %>
